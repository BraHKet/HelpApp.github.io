<!-- Modificare solo la parte degli script e dei form -->

<!-- Sostituire le parti dei form con il seguente codice -->

        <!-- Iscrizione utenti -->
<div>
    <div class="form-container">
        <h2 class="text-3xl font-bold text-center mb-6 text-gray-800">Iscriviti alla newsletter</h2>
        <p class="text-center text-gray-600 mb-8">Resta aggiornato sullo sviluppo dell'app e sii tra i primi a poterla provare in anteprima!</p>
        
        <form id="newsletter-form" class="space-y-6">
            <div>
                <label for="name" class="form-label">Nome</label>
                <input type="text" id="name" name="entry.237363632" class="form-input" required>
            </div>
            
            <div>
                <label for="email" class="form-label">Email</label>
                <input type="email" id="email" name="entry.1494879944" class="form-input" required>
            </div>
            
            <div>
                <label class="custom-checkbox">
                    <input type="checkbox" id="privacy-check" required>
                    <span class="checkmark"></span>
                    <span class="ml-2">Accetto la privacy policy e i termini di servizio</span>
                </label>
            </div>
            
            <button type="submit" id="submit-btn" class="button w-full flex justify-center items-center">
                <span>Iscriviti ora</span>
                <div class="loader" id="newsletter-loader"></div>
            </button>
        </form>
        
        <div id="confirmation" class="hidden mt-6 p-5 bg-green-100 text-green-700 rounded-lg text-center">
            <i class="fas fa-check-circle text-2xl mb-2"></i>
            <p class="font-medium">Grazie per l'iscrizione!</p>
            <p>Controlla la tua email per confermare l'iscrizione!</p>
        </div>
        
        <div id="error" class="hidden mt-6 p-5 bg-red-100 text-red-700 rounded-lg text-center">
            <i class="fas fa-exclamation-circle text-2xl mb-2"></i>
            <p class="font-medium">Si è verificato un errore!</p>
            <p>Riprova più tardi o contattaci se il problema persiste.</p>
        </div>
    </div>
</div>

<!-- Diventa esperto -->
<div id="diventa-esperto">
    <div class="form-container">
        <h2 class="text-3xl font-bold text-center mb-6 text-gray-800">Diventa un esperto</h2>
        <p class="text-center text-gray-600 mb-8">Metti a disposizione le tue competenze e guadagna aiutando le persone che hanno bisogno della tua esperienza.</p>
        
        <form id="expert-form" class="space-y-6">
            <div>
                <label for="expert-name" class="form-label">Nome completo</label>
                <input type="text" id="expert-name" name="entry.889384443" class="form-input" required>
            </div>
            
            <div>
                <label for="expert-email" class="form-label">Email</label>
                <input type="email" id="expert-email" name="entry.1344618123" class="form-input" required>
            </div>
            
            <div>
                <label for="expert-skills" class="form-label">Le tue competenze</label>
                <select id="expert-skills" name="entry.1521319819" class="form-input" required>
                    <option value="">Seleziona la tua area principale</option>
                    <option value="tech">Supporto tecnico e informatico</option>
                    <option value="study">Supporto allo studio</option>
                    <option value="mobile">Assistenza dispositivi mobili</option>
                    <option value="document">Assistenza documenti e burocrazia</option>
                    <option value="other">Altro (specificare)</option>
                </select>
            </div>
            
            <div>
                <label for="expert-description" class="form-label">Descrivi la tua esperienza</label>
                <textarea id="expert-description" name="entry.2130995655" rows="3" class="form-input" style="color: #333333;" required></textarea>
            </div>
            
            <div>
                <label class="custom-checkbox">
                    <input type="checkbox" id="expert-privacy-check" required>
                    <span class="checkmark"></span>
                    <span class="ml-2">Accetto la privacy policy e i termini di servizio</span>
                </label>
            </div>
            
            <button type="submit" id="expert-submit-btn" class="button w-full flex justify-center items-center">
                <span>Invia candidatura</span>
                <div class="loader" id="expert-loader"></div>
            </button>
        </form>
        
        <div id="expert-confirmation" class="hidden mt-6 p-5 bg-green-100 text-green-700 rounded-lg text-center">
            <i class="fas fa-check-circle text-2xl mb-2"></i>
            <p class="font-medium">Grazie per la tua candidatura!</p>
            <p>Ti contatteremo presto per i prossimi passi.</p>
        </div>
        
        <div id="expert-error" class="hidden mt-6 p-5 bg-red-100 text-red-700 rounded-lg text-center">
            <i class="fas fa-exclamation-circle text-2xl mb-2"></i>
            <p class="font-medium">Si è verificato un errore!</p>
            <p>Riprova più tardi o contattaci se il problema persiste.</p>
        </div>
    </div>
</div>

<!-- Sostituire lo script alla fine del file con il seguente -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        console.log('DOM fully loaded');
        
        // Mobile menu toggle
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        
        if (mobileMenuButton && mobileMenu) {
            console.log('Mobile menu elements found');
            
            mobileMenuButton.addEventListener('click', function() {
                console.log('Mobile menu button clicked');
                // Toggle mobile menu visibility
                if (mobileMenu.classList.contains('hidden')) {
                    mobileMenu.classList.remove('hidden');
                } else {
                    mobileMenu.classList.add('hidden');
                }
            });
            
            // Close mobile menu when clicking on a link
            const mobileNavLinks = mobileMenu.querySelectorAll('a');
            mobileNavLinks.forEach(link => {
                link.addEventListener('click', function() {
                    mobileMenu.classList.add('hidden');
                });
            });
        } else {
            console.error('Mobile menu elements not found');
        }
        
        // FORM CONFIG - URL del Google Form
        const NEWSLETTER_FORM_URL = 'https://docs.google.com/forms/d/e/1FAIpQLSfCTdLjo-AZepYechK0702HOTHU3tkr1nZpWshiOs8x6fKw4Q/formResponse';
        const EXPERT_FORM_URL = 'https://docs.google.com/forms/d/e/1FAIpQLSfCTdLjo-AZepYechK0702HOTHU3tkr1nZpWshiOs8x6fKw4Q/formResponse';
        
        // Newsletter form handling con Google Forms
        const newsletterForm = document.getElementById('newsletter-form');
        const confirmationMessage = document.getElementById('confirmation');
        const errorMessage = document.getElementById('error');
        const newsletterLoader = document.getElementById('newsletter-loader');
        
        if (newsletterForm) {
            console.log('Newsletter form found');
            
            newsletterForm.addEventListener('submit', function(e) {
                e.preventDefault();
                console.log('Newsletter form submitted');
                
                const submitButton = document.getElementById('submit-btn');
                const submitText = submitButton.querySelector('span');
                
                // Show loading state
                submitText.textContent = 'Invio in corso...';
                newsletterLoader.style.display = 'block';
                submitButton.disabled = true;
                
                // Get form data
                const name = document.getElementById('name').value;
                const email = document.getElementById('email').value;
                const privacyAccepted = document.getElementById('privacy-check').checked;
                
                // Validate email
                if (!validateEmail(email)) {
                    console.log('Email is invalid');
                    // Error with the email format
                    errorMessage.innerHTML = `
                        <i class="fas fa-exclamation-circle text-2xl mb-2"></i>
                        <p class="font-medium">Formato email non valido!</p>
                        <p>Inserisci un indirizzo email valido.</p>
                    `;
                    errorMessage.classList.remove('hidden');
                    
                    // Reset button state
                    submitText.textContent = 'Iscriviti ora';
                    newsletterLoader.style.display = 'none';
                    submitButton.disabled = false;
                    
                    setTimeout(() => {
                        errorMessage.classList.add('hidden');
                    }, 5000);
                    
                    return;
                }
                
                if (!privacyAccepted) {
                    console.log('Privacy policy not accepted');
                    errorMessage.innerHTML = `
                        <i class="fas fa-exclamation-circle text-2xl mb-2"></i>
                        <p class="font-medium">Accetta la privacy policy</p>
                        <p>Per procedere devi accettare la privacy policy e i termini di servizio.</p>
                    `;
                    errorMessage.classList.remove('hidden');
                    
                    // Reset button state
                    submitText.textContent = 'Iscriviti ora';
                    newsletterLoader.style.display = 'none';
                    submitButton.disabled = false;
                    
                    setTimeout(() => {
                        errorMessage.classList.add('hidden');
                    }, 5000);
                    
                    return;
                }
                
                // Prepare form data for Google Forms
                const formData = new FormData();
                formData.append('entry.237363632', name); // Nome utente
                formData.append('entry.1494879944', email); // Email utente
                
                // Submit form using hidden iframe to avoid CORS issues
                const iframe = document.createElement('iframe');
                iframe.name = 'hidden_iframe';
                iframe.style.display = 'none';
                document.body.appendChild(iframe);
                
                // Create a temp form to submit data
                const tempForm = document.createElement('form');
                tempForm.action = NEWSLETTER_FORM_URL;
                tempForm.method = 'POST';
                tempForm.target = 'hidden_iframe';
                
                // Add form data to temp form
                for (const [key, value] of formData.entries()) {
                    const input = document.createElement('input');
                    input.type = 'hidden';
                    input.name = key;
                    input.value = value;
                    tempForm.appendChild(input);
                }
                
                document.body.appendChild(tempForm);
                
                // Submit form and handle response
                try {
                    tempForm.submit();
                    console.log('Newsletter form data sent to Google Forms');
                    
                    // Show success message after a short delay (Google Form submissions usually don't provide feedback)
                    setTimeout(function() {
                        // Successful submission
                        newsletterForm.reset();
                        newsletterForm.style.display = 'none';
                        confirmationMessage.classList.remove('hidden');
                        
                        // Clean up
                        document.body.removeChild(tempForm);
                        document.body.removeChild(iframe);
                    }, 1000);
                } catch (error) {
                    console.error('Error submitting newsletter form:', error);
                    
                    // Show error message
                    errorMessage.innerHTML = `
                        <i class="fas fa-exclamation-circle text-2xl mb-2"></i>
                        <p class="font-medium">Si è verificato un errore!</p>
                        <p>Riprova più tardi o contattaci se il problema persiste.</p>
                    `;
                    errorMessage.classList.remove('hidden');
                    
                    // Reset button state
                    submitText.textContent = 'Iscriviti ora';
                    newsletterLoader.style.display = 'none';
                    submitButton.disabled = false;
                    
                    // Clean up
                    document.body.removeChild(tempForm);
                    document.body.removeChild(iframe);
                    
                    setTimeout(() => {
                        errorMessage.classList.add('hidden');
                    }, 5000);
                }
            });
        } else {
            console.error('Newsletter form not found');
        }
        
        // Expert form handling con Google Forms
        const expertForm = document.getElementById('expert-form');
        const expertConfirmation = document.getElementById('expert-confirmation');
        const expertError = document.getElementById('expert-error');
        const expertLoader = document.getElementById('expert-loader');
        
        if (expertForm) {
            console.log('Expert form found');
            
            expertForm.addEventListener('submit', function(e) {
                e.preventDefault();
                console.log('Expert form submitted');
                
                const expertSubmitButton = document.getElementById('expert-submit-btn');
                const expertSubmitText = expertSubmitButton.querySelector('span');
                
                // Show loading state
                expertSubmitText.textContent = 'Invio in corso...';
                expertLoader.style.display = 'block';
                expertSubmitButton.disabled = true;
                
                // Get form data
                const name = document.getElementById('expert-name').value;
                const email = document.getElementById('expert-email').value;
                const skills = document.getElementById('expert-skills').value;
                const description = document.getElementById('expert-description').value;
                const privacyAccepted = document.getElementById('expert-privacy-check').checked;
                
                // Validate email
                if (!validateEmail(email)) {
                    console.log('Expert email is invalid');
                    // Error with the email format
                    expertError.innerHTML = `
                        <i class="fas fa-exclamation-circle text-2xl mb-2"></i>
                        <p class="font-medium">Formato email non valido!</p>
                        <p>Inserisci un indirizzo email valido.</p>
                    `;
                    expertError.classList.remove('hidden');
                    
                    // Reset button state
                    expertSubmitText.textContent = 'Invia candidatura';
                    expertLoader.style.display = 'none';
                    expertSubmitButton.disabled = false;
                    
                    setTimeout(() => {
                        expertError.classList.add('hidden');
                    }, 5000);
                    
                    return;
                }
                
                if (!privacyAccepted) {
                    console.log('Expert privacy policy not accepted');
                    expertError.innerHTML = `
                        <i class="fas fa-exclamation-circle text-2xl mb-2"></i>
                        <p class="font-medium">Accetta la privacy policy</p>
                        <p>Per procedere devi accettare la privacy policy e i termini di servizio.</p>
                    `;
                    expertError.classList.remove('hidden');
                    
                    // Reset button state
                    expertSubmitText.textContent = 'Invia candidatura';
                    expertLoader.style.display = 'none';
                    expertSubmitButton.disabled = false;
                    
                    setTimeout(() => {
                        expertError.classList.add('hidden');
                    }, 5000);
                    
                    return;
                }
                
                // Prepare form data for Google Forms
                const formData = new FormData();
                formData.append('entry.889384443', name); // Nome esperto
                formData.append('entry.1344618123', email); // Email esperto
                formData.append('entry.1521319819', skills); // Competenze esperto
                formData.append('entry.2130995655', description); // Descrizione esperienza
                
                // Submit form using hidden iframe to avoid CORS issues
                const iframe = document.createElement('iframe');
                iframe.name = 'hidden_iframe_expert';
                iframe.style.display = 'none';
                document.body.appendChild(iframe);
                
                // Create a temp form to submit data
                const tempForm = document.createElement('form');
                tempForm.action = EXPERT_FORM_URL;
                tempForm.method = 'POST';
                tempForm.target = 'hidden_iframe_expert';
                
                // Add form data to temp form
                for (const [key, value] of formData.entries()) {
                    const input = document.createElement('input');
                    input.type = 'hidden';
                    input.name = key;
                    input.value = value;
                    tempForm.appendChild(input);
                }
                
                document.body.appendChild(tempForm);
                
                // Submit form and handle response
                try {
                    tempForm.submit();
                    console.log('Expert form data sent to Google Forms');
                    
                    // Show success message after a short delay (Google Form submissions usually don't provide feedback)
                    setTimeout(function() {
                        // Successful submission
                        expertForm.reset();
                        expertForm.style.display = 'none';
                        expertConfirmation.classList.remove('hidden');
                        
                        // Clean up
                        document.body.removeChild(tempForm);
                        document.body.removeChild(iframe);
                    }, 1000);
                } catch (error) {
                    console.error('Error submitting expert form:', error);
                    
                    // Show error message
                    expertError.innerHTML = `
                        <i class="fas fa-exclamation-circle text-2xl mb-2"></i>
                        <p class="font-medium">Si è verificato un errore!</p>
                        <p>Riprova più tardi o contattaci se il problema persiste.</p>
                    `;
                    expertError.classList.remove('hidden');
                    
                    // Reset button state
                    expertSubmitText.textContent = 'Invia candidatura';
                    expertLoader.style.display = 'none';
                    expertSubmitButton.disabled = false;
                    
                    // Clean up
                    document.body.removeChild(tempForm);
                    document.body.removeChild(iframe);
                    
                    setTimeout(() => {
                        expertError.classList.add('hidden');
                    }, 5000);
                }
            });
        } else {
            console.error('Expert form not found');
        }
        
        // Email validation function
        function validateEmail(email) {
            console.log('Validating email:', email);
            const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(String(email).toLowerCase());
        }
        
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 80, // Account for fixed header
                        behavior: 'smooth'
                    });
                }
            });
        });
        
        // Animation on scroll
        const animateOnScroll = function() {
            const elements = document.querySelectorAll('.feature-card, .advantage-card, .step-card');
            
            elements.forEach(element => {
                const elementPosition = element.getBoundingClientRect().top;
                const windowHeight = window.innerHeight;
                
                if (elementPosition < windowHeight - 100) {
                    element.classList.add('animate__animated', 'animate__fadeInUp');
                }
            });
        };
        
        // Initial check on load
        animateOnScroll();
        
        // Check on scroll
        window.addEventListener('scroll', animateOnScroll);
    });
</script>
